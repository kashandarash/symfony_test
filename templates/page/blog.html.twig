{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}

{% block body %}
  <div class="text-center container">
    <h1 class="text-muted mb-3">{{ 'blog'|trans({}, 'pages') }}</h1>
  </div>

  <div class="row g-5 mb-4">
    <div class="col-md-8">
      {% for article in articles %}
        <article class="blog-post mb-5">
          <h2 class="display-8 text-muted mb-1">{{ article.title }}</h2>
          <hr>
          {{ article.content|raw }}
        </article>
      {% endfor %}


      {% if max_pages > 1 %}
        <nav aria-label="Page navigation">
          <ul class="pagination pagination-minimal justify-content-center">

            {# "Previous" Link - Disabled if on the first page #}
            <li class="page-item {{ current_page == 1 ? 'disabled' : '' }}">
              <a class="page-link" href="{{ path('blog', {page: current_page - 1}) }}">Previous</a>
            </li>

            {# Page Number Links - Loop from 1 to the max number of pages #}
            {% for i in 1..max_pages %}
              <li class="page-item {{ i == current_page ? 'active' : '' }}"
                  aria-current="{{ i == current_page ? 'page' : 'false' }}">
                <a class="page-link" href="{{ path('blog', {page: i}) }}">{{ i }}</a>
              </li>
            {% endfor %}

            {# "Next" Link - Disabled if on the last page #}
            <li class="page-item {{ current_page == max_pages ? 'disabled' : '' }}">
              <a class="page-link" href="{{ path('blog', {page: current_page + 1}) }}">Next</a>
            </li>
          </ul>
        </nav>
      {% endif %}

    </div>
    <div class="col-md-4">
      <div class="position-sticky" style="top: 2rem;">
        <div class="p-4 mb-3 bg-body-tertiary rounded">
          <h4>About</h4>
          <p class="mb-0">
            Customize this section to tell your visitors a little bit about your publication, writers,
            content, or something else entirely. Totally up to you.
          </p>

          <form class="mt-3" method="get">

            <div class="mb-3">
              <label for="search">Search <span class="text-muted">(by title and content)</span></label>
              <input type="text" class="form-control" name="search" id="search" value="{{ search }}" maxlength="50">
            </div>

            <div class="mb-4">
              <label for="order">Order</label>
              <select class="w-100 form-select" id="order" name="order">
                {% if order == 'ASC' %}
                  <option>DESC</option>
                  <option selected="selected">ASC</option>
                {% else %}
                  <option selected="selected">DESC</option>
                  <option>ASC</option>
                {% endif %}
              </select>
            </div>

            <div class="d-flex justify-content-between gap-2">
              <a href="{{ path('blog') }}" class="btn btn-secondary btn-lg">
                Reset
              </a>
              <button class="btn btn-primary btn-lg" type="submit">Filter</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
